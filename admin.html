<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>管理后台</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{background:#fdf6fb;padding:20px}
        .card{background:#fff;border-radius:16px;padding:18px;margin-bottom:14px}
        .btn{width:100%;padding:12px;background:#ff8fb7;color:#fff;border:none;border-radius:12px;margin-top:10px}
        input,textarea{width:100%;padding:10px;margin:6px 0}
    </style>
</head>
<body>

<div class="card">
    <input id="name" placeholder="昵称">
    <input id="height" placeholder="身高">
    <input id="weight" placeholder="体重">
    <input id="size" placeholder="尺寸">
    <input type="file" id="sizeImg">
    <button class="btn" onclick="saveProfile()">保存</button>
</div>

<div class="card">
    <textarea id="postTxt" placeholder="文字"></textarea>
    <input type="file" id="postFile">
    <button class="btn" onclick="publish()">发布动态</button>
</div>

<script>
function saveProfile(){
    let user = {
        name:document.getElementById('name').value,
        height:document.getElementById('height').value,
        weight:document.getElementById('weight').value,
        size:document.getElementById('size').value,
        avatar:'https://picsum.photos/200'
    }
    let f = document.getElementById('sizeImg').files[0]
    if(f){
        let r = new FileReader()
        r.onload=e=>{
            user.sizeImg = e.target.result
            localStorage.user = JSON.stringify(user)
            alert('成功')
        }
        r.readAsDataURL(f)
    }else{
        localStorage.user = JSON.stringify(user)
        alert('成功')
    }
}

function publish(){
    let f = document.getElementById('postFile').files[0]
    if(!f)return
    let r = new FileReader()
    r.onload=e=>{
        let p = {
            txt:document.getElementById('postTxt').value,
            type:f.type.startsWith('image')?'img':'vid',
            url:e.target.result
        }
        let arr = JSON.parse(localStorage.posts||'[]')
        arr.unshift(p)
        localStorage.posts = JSON.stringify(arr)
        alert('发布成功')
    }
    r.readAsDataURL(f)
}
</script>
</body>
</html>
