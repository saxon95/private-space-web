<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="format-detection" content="telephone=no">
<title>Private Space</title>
<style>
:root {
  --bg:white;
  --purple:#9f7aea;
  --gray:#999;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui}
body{background:var(--bg);padding-bottom:70px}
/* åŠ è½½ */
#loading{position:fixed;inset:0;background:#fff;display:grid;place-items:center;z-index:9999}
.loader{width:40px;height:40px;border:4px solid #eee;border-top:4px solid var(--purple);border-radius:50%;animation:spin .6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
/* å¹´é¾„éªŒè¯ */
#ageModal{position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:999;display:grid;place-items:center}
.age-box{background:white;padding:30px;border-radius:20px;width:90%;max-width:340px;text-align:center}
.age-box h3{color:var(--purple);margin-bottom:10px}
.age-box input{width:100%;padding:12px;border-radius:12px;border:1px solid #ddd;margin:10px 0;text-align:center}
.age-box button{width:100%;padding:12px;border-radius:12px;background:var(--purple);color:white;border:none;margin-top:6px}
.age-box .no{background:#f2f2f2;color:#333}
/* è®¿é—®å¯†é’¥ */
#accessModal{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:998;display:grid;place-items:center}
.access-box{background:white;padding:30px;border-radius:20px;width:90%;max-width:340px;text-align:center}
.access-box h3{color:var(--purple);margin-bottom:10px}
.access-box input{width:100%;padding:12px;border-radius:12px;border:1px solid #ddd;margin:10px 0}
.access-box button{width:100%;padding:12px;border-radius:12px;background:var(--purple);color:white;border:none;margin-top:6px}
/* ç®¡ç†å‘˜ç™»å½• */
#adminLogin{position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:1000;display:none;place-items:center}
.admin-login-box{background:white;padding:30px;border-radius:20px;width:90%;max-width:340px;text-align:center}
.admin-login-box h3{color:var(--purple)}
.admin-login-box input{width:100%;padding:12px;border-radius:12px;border:1px solid #ddd;margin:12px 0}
.admin-login-box button{width:100%;padding:12px;background:var(--purple);color:white;border:none;border-radius:12px}
/* ç®¡ç†å‘˜é¢æ¿ */
#adminPanel{position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:1001;display:none;place-items:center}
.admin-box{background:white;width:90%;max-width:360px;padding:25px;border-radius:20px}
.admin-box h3{color:var(--purple);margin-bottom:16px}
.admin-card{background:#f8f5ff;padding:16px;border-radius:14px;margin-bottom:12px}
.admin-card h4{margin-bottom:8px}
.switch{display:flex;justify-content:space-between;align-items:center}
.switch label{width:50px;height:26px;background:#ddd;border-radius:20px;position:relative}
.switch label::after{content:'';position:absolute;width:22px;height:22px;background:white;border-radius:50%;top:2px;left:2px;transition:.2s}
.switch input:checked + label{background:var(--purple)}
.switch input:checked + label::after{left:26px}
.admin-box button{padding:10px 14px;background:var(--purple);color:white;border:none;border-radius:12px;width:100%;margin-top:10px}
/* æ³¨å†Œ */
#register{display:none;padding:20px}
#register h3{color:var(--purple);text-align:center;margin-bottom:16px}
#register input,#register select{width:100%;padding:12px;border-radius:12px;border:1px solid #ddd;margin:8px 0}
#register button{width:100%;padding:12px;background:var(--purple);color:white;border:none;border-radius:12px;margin-top:6px}
/* å†…å®¹åŒº */
#content{display:none}
/* åº•éƒ¨å¯¼èˆª */
.nav{position:fixed;bottom:0;left:0;width:100%;background:white;border-top:1px solid #eee;display:flex;padding:10px 0;z-index:10}
.nav-item{flex:1;text-align:center;font-size:12px;color:var(--gray)}
.nav-item.active{color:var(--purple)}
.nav-item i{display:block;font-size:20px;margin-bottom:4px}
/* é¡µé¢ */
.page{display:none;padding:20px}
.page.active{display:block}
/* é¦–é¡µ */
.profile{text-align:center;background:white;border-radius:20px;padding:25px;margin-bottom:16px}
.avatar{width:90px;height:90px;border-radius:50%;object-fit:cover;border:3px solid #e2d9ff}
.name{font-size:22px;font-weight:bold;margin-top:10px}
.bio{color:var(--gray);margin:6px 0 16px}
.btns{display:flex;gap:10px;justify-content:center}
.btn{padding:10px 14px;background:var(--purple);color:white;border:none;border-radius:12px}
/* ç›¸å†Œ */
.album{background:white;padding:20px;border-radius:20px}
.album h3{color:var(--purple);margin-bottom:12px}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.grid img{width:100%;aspect-ratio:1;border-radius:10px;object-fit:cover;filter:blur(18px);transition:.3s}
.grid img.show{filter:blur(0)}
/* èŠå¤© */
.chat{background:white;padding:20px;border-radius:20px;margin-top:16px}
.chat h3{color:var(--purple);margin-bottom:12px}
#msgs{height:180px;overflow-y:auto;background:#f8f5ff;padding:10px;border-radius:12px}
.msg{background:white;padding:8px 12px;border-radius:8px;margin-bottom:8px}
.msg-name{font-size:12px;color:var(--purple)}
.chat-input{display:flex;gap:8px;margin-top:10px}
.chat-input input{flex:1;padding:12px;border:1px solid #ddd;border-radius:12px}
.chat-input button{padding:12px 16px;background:var(--purple);color:white;border:none;border-radius:12px}
/* åŠ¨æ€ */
.feed-item{background:white;padding:16px;border-radius:14px;margin-bottom:12px}
.feed-header{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.feed-avatar{width:40px;height:40px;border-radius:50%}
.feed-images{display:grid;grid-template-columns:repeat(3,1fr);gap:4px;margin:10px 0}
.feed-images img{width:100%;aspect-ratio:1;border-radius:8px;object-fit:cover}
/* èµ„æ–™ */
.profile-page{background:white;padding:25px;border-radius:20px;text-align:center}
.profile-page .avatar{width:120px;height:120px}
.profile-page .name{font-size:26px}
.info{text-align:left;margin-top:20px}
.info .item{padding:12px 0;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between}
</style>
</head>
<body>

<div id="loading"><div class="loader"></div></div>

<!-- å¹´é¾„éªŒè¯ -->
<div id="ageModal">
  <div class="age-box">
    <h3>å¹´é¾„è®¤è¯</h3>
    <p>ä»…é™18å²ä»¥ä¸Šè®¿é—®</p >
    <input type="number" id="birthYear" placeholder="è¾“å…¥å‡ºç”Ÿå¹´ä»½">
    <button onclick="checkAge()">ç¡®è®¤è¿›å…¥</button>
    <button class="no" onclick="closePage()">æœªæ»¡18å²</button>
  </div>
</div>

<!-- è®¿é—®å¯†é’¥ -->
<div id="accessModal">
  <div class="access-box">
    <h3>è®¿é—®å¯†é’¥</h3>
    <input id="keyInput" placeholder="è¯·è¾“å…¥åˆ†äº«å¯†é’¥">
    <button onclick="useKey()">ç¡®å®šè¿›å…¥</button>
    <button onclick="openAdminLogin()" style="margin-top:8px;background:#f2f2f2;color:#333">ç®¡ç†å‘˜ç™»å½•</button>
  </div>
</div>

<!-- ç®¡ç†å‘˜ç™»å½• -->
<div id="adminLogin">
  <div class="admin-login-box">
    <h3>ç®¡ç†å‘˜ç™»å½•</h3>
    <input id="adminPwd" type="password" placeholder="è¾“å…¥ç®¡ç†å‘˜å¯†ç ">
    <button onclick="adminLogin()">ç™»å½•</button>
    <button onclick="closeAdminLogin()" style="margin-top:8px;background:#f2f2f2;color:#333">è¿”å›</button>
  </div>
</div>

<!-- ç®¡ç†å‘˜é¢æ¿ -->
<div id="adminPanel">
  <div class="admin-box">
    <h3>âš™ï¸ ç®¡ç†å‘˜åå°</h3>
    <div class="admin-card">
      <h4>ç§å¯†ç›¸å†Œè®¿é—®æƒé™</h4>
      <div class="switch">
        <span>å…è®¸æ™®é€šç”¨æˆ·æŸ¥çœ‹ç›¸å†Œ</span>
        <input type="checkbox" id="albumOpen">
        <label for="albumOpen"></label>
      </div>
    </div>
    <div class="admin-card">
      <h4>å½“å‰å¯†é’¥</h4>
      <p>Saxon95</p >
    </div>
    <button onclick="saveAdminSetting()">ä¿å­˜è®¾ç½®</button>
    <button onclick="closeAdminPanel()" style="background:#f2f2f2;color:#333">å…³é—­</button>
  </div>
</div>

<!-- æ³¨å†Œ -->
<div id="register">
  <h3>æ³¨å†Œä¿¡æ¯</h3>
  <input id="nick" placeholder="æ˜µç§°">
  <input id="age" placeholder="å¹´é¾„" type="number">
  <select id="gender">
    <option value="ç”·">ç”·</option>
    <option value="å¥³">å¥³</option>
    <option value="ä¿å¯†">ä¿å¯†</option>
  </select>
  <input id="bust" placeholder="èƒ¸å›´">
  <input id="waist" placeholder="è…°å›´">
  <input id="size" placeholder="å°ºå¯¸">
  <input id="style" placeholder="é£æ ¼">
  <button onclick="doRegister()">å®Œæˆæ³¨å†Œ</button>
</div>

<!-- ä¸»å†…å®¹ -->
<div id="content">
  <!-- é¦–é¡µ -->
  <div id="home" class="page active">
    <div class="profile">
      < img class="avatar" src="https://picsum.photos/200/200">
      <div class="name">ç§å¯†ç©ºé—´</div>
      <div class="bio">ä»…é™å¥½å‹è®¿é—®</div>
      <div class="btns">
        <button class="btn" onclick="openAdminPanel()">ç®¡ç†å‘˜é¢æ¿</button>
      </div>
    </div>

    <div class="album">
      <h3>ğŸ“¸ ç§å¯†ç›¸å†Œ</h3>
      <div class="grid" id="photoGrid">
        < img src="https://picsum.photos/300/300?1">
        < img src="https://picsum.photos/300/300?2">
        < img src="https://picsum.photos/300/300?3">
        < img src="https://picsum.photos/300/300?4">
        < img src="https://picsum.photos/300/300?5">
        < img src="https://picsum.photos/300/300?6">
      </div>
    </div>

    <div class="chat">
      <h3>ğŸ’¬ èŠå¤©</h3>
      <div id="msgs"></div>
      <div class="chat-input">
        <input id="msgInput" placeholder="è¾“å…¥æ¶ˆæ¯">
        <button onclick="sendMsg()">å‘é€</button>
      </div>
    </div>
  </div>

  <!-- åŠ¨æ€ -->
  <div id="feed" class="page">
    <div class="feed-item">
      <div class="feed-header">
        < img class="feed-avatar" src="https://picsum.photos/40/40">
        <div>
          <div>ç§å¯†ç©ºé—´</div>
          <div style="font-size:12px;color:#999">ä»Šå¤©</div>
        </div>
      </div>
      <div>æ–°çš„ä¸€å¹´ï¼Œå¹³å®‰å–œä¹</div>
      <div class="feed-images">
        < img src="https://picsum.photos/300/300?11">
      </div>
    </div>
  </div>

  <!-- ä¸ªäººèµ„æ–™ -->
  <div id="userinfo" class="page">
    <div class="profile-page">
      < img class="avatar" src="https://picsum.photos/200/200">
      <div class="name" id="infoNick">--</div>
      <div class="bio">ç§å¯†ç©ºé—´</div>
      <div class="info">
        <div class="item"><span>å¹´é¾„</span><span id="infoAge">--</span></div>
        <div class="item"><span>æ€§åˆ«</span><span id="infoGender">--</span></div>
        <div class="item"><span>èƒ¸å›´</span><span id="infoBust">--</span></div>
        <div class="item"><span>è…°å›´</span><span id="infoWaist">--</span></div>
        <div class="item"><span>å°ºå¯¸</span><span id="infoSize">--</span></div>
        <div class="item"><span>é£æ ¼</span><span id="infoStyle">--</span></div>
      </div>
    </div>
  </div>

  <!-- å¯¼èˆª -->
  <div class="nav">
    <div class="nav-item active" onclick="go('home')"><i>ğŸ </i><span>é¦–é¡µ</span></div>
    <div class="nav-item" onclick="go('feed')"><i>ğŸ“°</i><span>åŠ¨æ€</span></div>
    <div class="nav-item" onclick="go('userinfo')"><i>ğŸ‘¤</i><span>èµ„æ–™</span></div>
  </div>
</div>

<script>
const SHARE_KEY = "Saxon95";
const ADMIN_PASS = "admin888";

// æœ¬åœ°é…ç½®
let config = JSON.parse(localStorage.getItem("config")) || {
  albumOpen: false
};

// é¡µé¢åŠ è½½
window.onload = () => {
  setTimeout(()=>document.getElementById("loading").style.display="none",500);
  if(localStorage.getItem("ageOk")){
    document.getElementById("ageModal").style.display="none";
    if(localStorage.getItem("user")){
      document.getElementById("accessModal").style.display="none";
      document.getElementById("content").style.display="block";
      loadUserInfo();
      refreshAlbum();
    }
  }
};

// å¹´é¾„éªŒè¯
function checkAge(){
  let y = document.getElementById("birthYear").value;
  if(!y || y.length<4) return alert("è¯·è¾“å…¥æ­£ç¡®å¹´ä»½");
  let age = new Date().getFullYear() - parseInt(y);
  if(age>=18){
    localStorage.setItem("ageOk","1");
    document.getElementById("ageModal").style.display="none";
  }else{
    alert("æœªæ»¡18å²ç¦æ­¢è®¿é—®");
  }
}

// ä½¿ç”¨å¯†é’¥
function useKey(){
  let v = document.getElementById("keyInput").value.trim();
  if(v === SHARE_KEY){
    document.getElementById("accessModal").style.display="none";
    document.getElementById("register").style.display="block";
  }else{
    alert("å¯†é’¥ä¸æ­£ç¡®");
  }
}

// æ³¨å†Œ
function doRegister(){
  let nick = document.getElementById("nick").value;
  let age = document.getElementById("age").value;
  if(!nick || !age) return alert("è¯·å¡«å†™å®Œæ•´");
  let user = {
    nick, age,
    gender: document.getElementById("gender").value,
    bust: document.getElementById("bust").value,
    waist: document.getElementById("waist").value,
    size: document.getElementById("size").value,
    style: document.getElementById("style").value
  };
  localStorage.setItem("user", JSON.stringify(user));
  document.getElementById("register").style.display="none";
  document.getElementById("content").style.display="block";
  loadUserInfo();
  refreshAlbum();
}

// åŠ è½½èµ„æ–™
function loadUserInfo(){
  let u = JSON.parse(localStorage.getItem("user"));
  if(!u) return;
  document.getElementById("infoNick").innerText = u.nick;
  document.getElementById("infoAge").innerText = u.age;
  document.getElementById("infoGender").innerText = u.gender;
  document.getElementById("infoBust").innerText = u.bust || "--";
  document.getElementById("infoWaist").innerText = u.waist || "--";
  document.getElementById("infoSize").innerText = u.size || "--";
  document.getElementById("infoStyle").innerText = u.style || "--";
}

// ç›¸å†Œæ˜¾ç¤ºæ§åˆ¶
function refreshAlbum(){
  let imgs = document.querySelectorAll("#photoGrid img");
  if(config.albumOpen){
    imgs.forEach(i=>i.classList.add("show"));
  }else{
    imgs.forEach(i=>i.classList.remove("show"));
  }
}

// é¡µé¢åˆ‡æ¢
function go(id){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.querySelectorAll(".nav-item").forEach(n=>n.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  event.currentTarget.classList.add("active");
}

// å‘é€æ¶ˆæ¯
function sendMsg(){
  let i = document.getElementById("msgInput");
  let t = i.value.trim();
  if(!t) return;
  let u = JSON.parse(localStorage.getItem("user")) || {nick:"ç”¨æˆ·"};
  let ms = document.getElementById("msgs");
  let d = document.createElement("div");
  d.className = "msg";
  d.innerHTML = `<div class="msg-name">${u.nick}</div>${t}`;
  ms.appendChild(d);
  ms.scrollTop = ms.scrollHeight;
  i.value = "";
}

// ç®¡ç†å‘˜
function openAdminLogin(){
  document.getElementById("adminLogin").style.display="grid";
}
function closeAdminLogin(){
  document.getElementById("adminLogin").style.display="none";
}
function adminLogin(){
  let p = document.getElementById("adminPwd").value;
  if(p === ADMIN_PASS){
    localStorage.setItem("admin","ok");
    closeAdminLogin();
    alert("ç®¡ç†å‘˜ç™»å½•æˆåŠŸ");
  }else{
    alert("å¯†ç é”™è¯¯");
  }
}
function openAdminPanel(){
  if(!localStorage.getItem("admin")) return alert("è¯·å…ˆç™»å½•ç®¡ç†å‘˜");
  document.getElementById("albumOpen").checked = config.albumOpen;
  document.getElementById("adminPanel").style.display="grid";
}
function closeAdminPanel(){
  document.getElementById("adminPanel").style.display="none";
}
function saveAdminSetting(){
  config.albumOpen = document.getElementById("albumOpen").checked;
  localStorage.setItem("config", JSON.stringify(config));
  refreshAlbum();
  alert("å·²ä¿å­˜");
  closeAdminPanel();
}

function closePage(){
  document.body.innerHTML = "<h1>ç¦æ­¢è®¿é—®</h1>";
}
</script>
</body>
</html>
