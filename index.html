<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>我的动态主页</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#f5f5f5;padding-bottom:60px;font-family:system-ui}
header{background:#fff;padding:16px;border-bottom:1px solid #eee}
.tab-bar{display:flex;background:#fff;border-bottom:1px solid #eee}
.tab{flex:1;text-align:center;padding:12px 0;font-weight:600;cursor:pointer}
.tab.active{color:#ff6b9d}
.page{display:none;padding:10px}
.page.active{display:block}
.card{background:#fff;border-radius:12px;padding:16px;margin-bottom:10px;}
.card img,.card video{width:100%;max-height:400px;object-fit:cover;border-radius:8px;margin-top:10px}
</style>
</head>
<body>

<header>
  <div>我的动态主页</div>
</header>

<div class="tab-bar">
  <div class="tab active" onclick="tab(0)">动态</div>
  <div class="tab" onclick="tab(1)">资料</div>
</div>

<div class="page active" id="p0">
  <div id="postList"></div>
</div>

<div class="page" id="p1">
  <div class="card" id="profile"></div>
</div>

<script>
function tab(i){
  document.querySelectorAll('.tab').forEach((t,j)=>t.classList.toggle('active',j==i))
  document.querySelectorAll('.page').forEach((p,j)=>p.classList.toggle('active',j==i))
}

const API = "https://jsonblob.com/api/jsonBlob/1186156893246906368";

async function loadPosts() {
  try {
    const r = await fetch(API);
    const data = await r.json();
    render(data.posts || [], data.user || {});
  } catch(e) {
    console.log(e);
  }
}

function render(posts, user) {
  const plist = document.getElementById('postList');
  plist.innerHTML = '';
  posts.forEach(p => {
    const c = document.createElement('div');
    c.className = 'card';
    c.innerText = p.txt || '';
    if (p.type === 'img' && p.url) {
      const img = document.createElement('img');
      img.src = p.url;
      c.appendChild(img);
    }
    if (p.type === 'vid' && p.url) {
      const v = document.createElement('video');
      v.src = p.url;
      v.controls = true;
      c.appendChild(v);
    }
    plist.appendChild(c);
  });

  document.getElementById('profile').innerText =
`昵称：${user.name || '无'}
身高：${user.height || '无'}
年龄：${user.age || '无'}
尺寸：${user.size || '无'}`;
}

loadPosts();
</script>
</body>
</html>
