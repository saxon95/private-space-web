<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊàëÁöÑÂ∞èÁ©∫Èó¥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Helvetica Neue', sans-serif;
        }
        :root {
            --bg: #fdf6fb;
            --card: #ffffff;
            --text: #444;
            --sub: #999;
            --main: #ff8fb7;
            --tag: #ffe0f0;
            --tagtext: #ff5a95;
        }
        body {
            background: var(--bg);
            color: var(--text);
            padding: 20px 15px 60px;
        }
        .card {
            background: var(--card);
            border-radius: 16px;
            padding: 18px;
            margin-bottom: 14px;
        }
        .profile {
            text-align: center;
        }
        .avatar {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 10px;
        }
        .name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            justify-content: center;
            margin-top: 10px;
        }
        .tag {
            background: var(--tag);
            color: var(--tagtext);
            padding: 4px 9px;
            border-radius: 12px;
            font-size: 12px;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        .info-label {
            color: var(--sub);
        }
        .title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 12px;
            color: var(--main);
        }
        .post img, .private img {
            width: 100%;
            border-radius: 12px;
            margin-top: 8px;
        }
        .post video, .private video {
            width: 100%;
            margin-top: 8px;
            border-radius: 12px;
        }
        .post {
            margin-bottom: 12px;
            line-height: 1.5;
        }
        .countdown {
            font-size: 12px;
            color: var(--main);
            margin-top: 6px;
        }
        #imgViewer {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            place-items: center;
            z-index: 999;
        }
        #viewerImg {
            max-width: 90%;
            max-height: 90vh;
            border-radius: 12px;
        }
    </style>
</head>
<body>

<div class="card profile">
    <img class="avatar" id="avatar">
    <div class="name" id="name"></div>
    <div class="tags" id="tags"></div>
</div>

<div class="card">
    <div class="info-row">
        <span class="info-label">Ë∫´È´ò</span>
        <span id="height">--</span>
    </div>
    <div class="info-row">
        <span class="info-label">‰ΩìÈáç</span>
        <span id="weight">--</span>
    </div>
    <div class="info-row">
        <span class="info-label">Â∞∫ÂØ∏</span>
        <span id="size">--</span>
    </div>
    <img id="sizeImg" style="width:100%;border-radius:12px;margin-top:12px;display:none">
</div>

<div class="card">
    <div class="title">üìù Âä®ÊÄÅ</div>
    <div id="posts"></div>
</div>

<div class="card">
    <div class="title">üîí ÈôêÊó∂ÁßÅÊàø</div>
    <div id="privates"></div>
</div>

<div id="imgViewer" onclick="closeViewer()">
    <img id="viewerImg">
</div>

<script>
let user = JSON.parse(localStorage.getItem('user')) || {}
let posts = JSON.parse(localStorage.getItem('posts')) || []
let privates = JSON.parse(localStorage.getItem('private')) || []

document.getElementById('avatar').src = user.avatar || ''
document.getElementById('name').innerText = user.name || 'Â∞èÂèØÁà±'
document.getElementById('height').innerText = user.height || '--'
document.getElementById('weight').innerText = user.weight || '--'
document.getElementById('size').innerText = user.size || '--'

if (user.sizeImg) {
    let img = document.getElementById('sizeImg')
    img.src = user.sizeImg
    img.style.display = 'block'
}

let tagHtml = ''
;(user.style || []).forEach(t => {
    tagHtml += `<span class="tag">${t}</span>`
})
document.getElementById('tags').innerHTML = tagHtml

let postHtml = ''
posts.forEach(p => {
    postHtml += `
    <div class="post card">
        ${p.txt || ''}
        ${p.type === 'img' ? `<img src="${p.url}" onclick="view(this)">` : ''}
        ${p.type === 'vid' ? `<video src="${p.url}" controls></video>` : ''}
    </div>
    `
})
document.getElementById('posts').innerHTML = postHtml

privates = privates.filter(p => p.exp > Date.now())
let privateHtml = ''
privates.forEach(p => {
    let left = p.exp - Date.now()
    let h = Math.floor(left / 3600000)
    let m = Math.floor((left % 3600000) / 60000)
    privateHtml += `
    <div class="private card">
        ${p.type === 'img' ? `<img src="${p.url}" onclick="view(this)">` : ''}
        ${p.type === 'vid' ? `<video src="${p.url}" controls></video>` : ''}
        <div class="countdown">Ââ©‰Ωô ${h}Êó∂${m}ÂàÜ</div>
    </div>
    `
})
document.getElementById('privates').innerHTML = privateHtml

function view(img) {
    document.getElementById('viewerImg').src = img.src
    document.getElementById('imgViewer').style.display = 'grid'
}
function closeViewer() {
    document.getElementById('imgViewer').style.display = 'none'
}
</script>
</body>
</html>
