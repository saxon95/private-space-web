<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯çˆ±å°ç©ºé—´</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Helvetica Neue', sans-serif;
            transition: background 0.3s, color 0.2s;
        }

        :root {
            --bg: #fdf6fb;
            --card: #ffffff;
            --text: #444;
            --sub: #999;
            --main: #ff8fb7;
            --tag: #ffe0f0;
            --tagtext: #ff5a95;
        }
        .theme-pink {
            --bg: #fff0f6;
            --card: #ffccd5;
            --text: #5a2848;
            --sub: #b86a93;
            --main: #ff70a6;
            --tag: #ffc2d1;
            --tagtext: #c41856;
        }
        .theme-dark {
            --bg: #1a1a1e;
            --card: #252529;
            --text: #e0e0e0;
            --sub: #888;
            --main: #ff70a6;
            --tag: #333;
            --tagtext: #ffc2d1;
        }

        body {
            background: var(--bg);
            color: var(--text);
            padding-bottom: 80px;
            -webkit-user-select: none;
            user-select: none;
        }

        .hide { display: none !important; }

        .top-bar {
            display: flex;
            gap: 8px;
            padding: 12px 16px;
            justify-content: center;
        }
        .theme-btn {
            padding: 6px 10px;
            border-radius: 20px;
            border: none;
            background: var(--card);
            color: var(--text);
            font-size: 12px;
        }
        .theme-btn.active {
            background: var(--main);
            color: #fff;
        }

        .wooden-fish {
            text-align: center;
            margin: 10px 0;
        }
        .fish-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: var(--card);
            color: var(--main);
            font-size: 24px;
        }
        .good-text {
            font-size: 12px;
            color: var(--sub);
            margin-top: 4px;
        }

        #loading {
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 9999;
            display: grid;
            place-items: center;
        }
        .loader {
            width: 40px;
            height: 40px;
            border: 4px solid var(--tag);
            border-top: 4px solid var(--main);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            display: grid;
            place-items: center;
        }
        .modal-content {
            background: var(--card);
            padding: 24px;
            border-radius: 20px;
            width: 90%;
            max-width: 350px;
            text-align: center;
        }
        .modal-content h2 { margin-bottom: 16px; font-size: 18px; }
        .modal-content p { color: var(--sub); margin-bottom: 12px; font-size: 14px; }
        .modal-content input,
        .modal-content textarea,
        .modal-content select {
            width: 100%;
            padding: 12px;
            border: none;
            background: var(--bg);
            color: var(--text);
            border-radius: 12px;
            margin-bottom: 10px;
            font-size: 14px;
        }
        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            background: var(--main);
            color: #fff;
        }
        .btn-secondary {
            background: var(--tag);
            color: var(--text);
            margin-top: 8px;
        }
        .btn-danger {
            background: #ff6b8b;
            color: #fff;
            margin-top: 8px;
        }

        .avatar-grid {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 12px;
            justify-content: center;
        }
        .avatar-option {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            object-fit: cover;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .avatar-option.selected {
            border-color: var(--main);
        }

        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--card);
            display: flex;
            padding: 10px 0;
            border-radius: 20px 20px 0 0;
        }
        .tab-item {
            flex: 1;
            text-align: center;
            font-size: 12px;
            color: var(--sub);
        }
        .tab-item.active { color: var(--main); }
        .tab-item i {
            display: block;
            font-size: 22px;
            margin-bottom: 4px;
        }

        .page { padding: 16px; display: none; }
        .page.active { display: block; }

        .card {
            background: var(--card);
            border-radius: 16px;
            padding: 18px;
            margin-bottom: 14px;
        }

        .profile-header { text-align: center; padding: 20px 0; }
        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 12px;
        }
        .name { font-size: 20px; font-weight: 700; margin-bottom: 8px; }

        .style-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            justify-content: center;
        }
        .style-tag {
            background: var(--tag);
            color: var(--tagtext);
            padding: 4px 9px;
            border-radius: 12px;
            font-size: 12px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--tag);
        }
        .info-label { color: var(--sub); font-size: 14px; }

        .size-img {
            width: 100%;
            border-radius: 12px;
            margin-top: 10px;
            pointer-events: none;
        }

        .private-space h3 {
            margin-bottom: 12px;
            color: var(--main);
            font-size: 16px;
        }
        .countdown {
            color: var(--main);
            font-size: 12px;
            margin: 6px 0;
        }

        .board h3 {
            margin-bottom: 12px;
            color: var(--main);
        }
        .item {
            background: var(--bg);
            padding: 10px 12px;
            border-radius: 12px;
            margin-bottom: 8px;
            font-size: 14px;
        }
        .item-name {
            font-weight: 600;
            color: var(--main);
            margin-bottom: 4px;
        }

        #imgViewer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 99999;
            display: none;
            place-items: center;
            padding: 20px;
        }
        #viewerImg {
            max-width: 100%;
            max-height: 90vh;
            border-radius: 12px;
            pointer-events: none;
        }

        .qrcard {
            text-align: center;
            margin-top: 20px;
        }
        #qrcode {
            width: 120px;
            height: 120px;
            border-radius: 12px;
            margin: 10px auto;
        }

        img {
            pointer-events: none !important;
            -webkit-user-drag: none !important;
        }
    </style>
</head>
<body>

<div id="loading"><div class="loader"></div></div>

<div class="top-bar">
    <button class="theme-btn active" onclick="setTheme('')">æ¸…æ–°</button>
    <button class="theme-btn" onclick="setTheme('theme-pink')">ç²‰è‰²</button>
    <button class="theme-btn" onclick="setTheme('theme-dark')">å¤œé—´</button>
</div>

<div id="ageModal" class="modal">
    <div class="modal-content">
        <h2>å¹´é¾„éªŒè¯</h2>
        <p>å¯çˆ±å°ç©ºé—´ ğŸ”’</p>
        <input type="number" id="birthYear" placeholder="å‡ºç”Ÿå¹´ä»½">
        <button class="btn" onclick="verifyAge()">è¿›å…¥</button>
        <button class="btn btn-secondary" onclick="document.body.innerHTML='å…³é—­'">é€€å‡º</button>
    </div>
</div>

<div id="imgViewer" onclick="closeViewer()">
    <img id="viewerImg">
</div>

<div id="app" class="hide">
    <div id="home" class="page active">
        <button class="btn" id="publishBtn" onclick="openModal('postModal')">+ å‘å¸ƒåŠ¨æ€</button>

        <div class="wooden-fish">
            <button class="fish-btn" onclick="addGood()">ğŸŸ</button>
            <div class="good-text">åŠŸå¾· +1 | å¥½æ„ŸæŒ‡æ•°ï¼š<span id="loveNum">0</span></div>
        </div>

        <div id="postList" style="margin-top:14px"></div>

        <div class="card qrcard">
            <h3 style="color:var(--main)">ğŸ“± æ‰«ç å¿«é€Ÿè¿›å…¥</h3>
            <canvas id="qrcode"></canvas>
            <p style="font-size:12px;color:var(--sub)">æ‰«ä¸€æ‰«æ‰“å¼€å°ç©ºé—´</p>
        </div>
    </div>

    <div id="profilePage" class="page">
        <div class="card profile-header">
            <img class="avatar" id="avatarShow">
            <div class="name" id="nameShow"></div>
            <div class="style-tags" id="styleTagsBelowAvatar"></div>
        </div>

        <div class="card">
            <div class="info-row">
                <span class="info-label">èº«é«˜</span>
                <span id="heightShow">--</span>
            </div>
            <div class="info-row">
                <span class="info-label">ä½“é‡</span>
                <span id="weightShow">--</span>
            </div>
            <div class="info-row">
                <span class="info-label">å°ºå¯¸</span>
                <span id="sizeShow">--</span>
            </div>
            <div class="info-row">
                <span class="info-label">å°ºå¯¸è¯´æ˜</span>
                <span>Cm / A-E</span>
            </div>
            <img id="sizeImgShow" class="size-img hide">
        </div>

        <div class="card private-space">
            <h3>ğŸ”’ ç§å¯†ç©ºé—´</h3>
            <button class="btn" id="privateBtn" onclick="openModal('privateModal')">å‘å¸ƒé™æ—¶å†…å®¹</button>
            <div id="privateList" style="margin-top:14px"></div>
        </div>

        <button class="btn" id="editBtn" onclick="openModal('editProfileModal')">ç¼–è¾‘èµ„æ–™</button>
    </div>

    <div id="aboutPage" class="page">
        <div class="card">
            <h3 style="color:var(--main);margin-bottom:12px">ğŸŒ¸ å…³äºæˆ‘</h3>
            <p style="font-size:14px;line-height:1.6">æˆ‘çš„å¯çˆ±å°ç©ºé—´ï½</p>
            <div style="font-size:12px;color:var(--sub);margin-top:8px" id="viewCount">ğŸ‘€ æµè§ˆé‡ï¼š--</div>
        </div>

        <div class="card board">
            <h3>ğŸ’Œ ç•™è¨€æ¿</h3>
            <button class="btn" onclick="openModal('msgModal')">æˆ‘è¦ç•™è¨€</button>
            <div id="msgList" style="margin-top:12px"></div>
        </div>

        <div class="card board">
            <h3>âœ‰ï¸ ç§ä¿¡</h3>
            <button class="btn" onclick="openModal('chatModal')">å‘ç§ä¿¡</button>
            <div id="chatList" style="margin-top:12px"></div>
        </div>
    </div>

    <div class="tab-bar">
        <div class="tab-item active" onclick="go('home')"><i>ğŸ </i><span>é¦–é¡µ</span></div>
        <div class="tab-item" onclick="go('profilePage')"><i>âœ¨</i><span>Show</span></div>
        <div class="tab-item" onclick="go('aboutPage')"><i>ğŸŒ¸</i><span>å…³äºæˆ‘</span></div>
    </div>
</div>

<div id="editProfileModal" class="modal hide">
    <div class="modal-content">
        <h2>ç¼–è¾‘èµ„æ–™</h2>
        <input type="text" id="editName" placeholder="æ˜µç§°">
        <input type="number" id="editHeight" placeholder="èº«é«˜ cm">
        <input type="number" id="editWeight" placeholder="ä½“é‡ kg">
        <input type="text" id="editSize" placeholder="å°ºå¯¸ cm/A-E">
        <input type="file" id="editSizeImg" accept="image/*">
        <small>å°ºå¯¸å›¾ç‰‡</small>
        <select id="editStyle" multiple size="9" style="margin-top:10px">
            <option>å¯çˆ±</option><option>å‘†èŒ</option><option>é«˜å†·</option><option>èè‰</option><option>å¾¡å§</option>
            <option>ç½‘ç˜¾å°‘å¹´</option><option>æ€§æ„Ÿ</option><option>çº¯æ¬²</option><option>è¯±æƒ‘</option>
        </select>
        <small>å¯å¤šé€‰é£æ ¼</small>
        <p style="margin-top:10px">é€‰æ‹©å¤´åƒ</p>
        <div class="avatar-grid" id="avatarList"></div>
        <button class="btn" onclick="saveProfile()">ä¿å­˜</button>
        <button class="btn btn-secondary" onclick="closeModal('editProfileModal')">å–æ¶ˆ</button>
    </div>
</div>

<div id="postModal" class="modal hide">
    <div class="modal-content">
        <h2>å‘å¸ƒåŠ¨æ€</h2>
        <textarea id="postText" placeholder="å†™ä¸‹å¿ƒæƒ…..."></textarea>
        <input type="file" id="postMedia" accept="image/*">
        <button class="btn" onclick="publishPost()">å‘å¸ƒ</button>
        <button class="btn btn-secondary" onclick="closeModal('postModal')">å–æ¶ˆ</button>
    </div>
</div>

<div id="privateModal" class="modal hide">
    <div class="modal-content">
        <h2>ç§å¯†å‘å¸ƒ</h2>
        <input type="file" id="privateFile" accept="image/*">
        <select id="privateHour">
            <option value="3600000">1å°æ—¶</option>
            <option value="86400000">24å°æ—¶</option>
        </select>
        <button class="btn" onclick="addPrivate()">å‘å¸ƒ</button>
        <button class="btn btn-secondary" onclick="closeModal('privateModal')">å–æ¶ˆ</button>
    </div>
</div>

<div id="msgModal" class="modal hide">
    <div class="modal-content">
        <h2>ç•™è¨€</h2>
        <input type="text" id="msgName" placeholder="ä½ çš„æ˜µç§°">
        <textarea id="msgContent" placeholder="è¯´ç‚¹ä»€ä¹ˆ..."></textarea>
        <button class="btn" onclick="sendMsg()">å‘é€</button>
        <button class="btn btn-secondary" onclick="closeModal('msgModal')">å–æ¶ˆ</button>
    </div>
</div>

<div id="chatModal" class="modal hide">
    <div class="modal-content">
        <h2>ç§ä¿¡</h2>
        <input type="text" id="chatName" placeholder="ä½ çš„æ˜µç§°">
        <textarea id="chatContent" placeholder="è¯´ç‚¹ä»€ä¹ˆ..."></textarea>
        <button class="btn" onclick="sendChat()">å‘é€</button>
        <button class="btn btn-secondary" onclick="closeModal('chatModal')">å–æ¶ˆ</button>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
<script>
const MY_SECRET_KEY = "MY_SELF_2025";
let is_visitor = true;

const avatars = [
  "https://picsum.photos/id/64/200/200",
  "https://picsum.photos/id/65/200/200",
  "https://picsum.photos/id/66/200/200",
  "https://picsum.photos/id/67/200/200",
  "https://picsum.photos/id/68/200/200"
];

let user = JSON.parse(localStorage.getItem('user')) || {
    name: 'å°å¯çˆ±', avatar: avatars[0], height:'', weight:'', size:'', sizeImg:'', style:[]
}
let posts = JSON.parse(localStorage.getItem('posts')) || []
let privateList = JSON.parse(localStorage.getItem('private')) || []
let msgs = JSON.parse(localStorage.getItem('msgs')) || []
let chats = JSON.parse(localStorage.getItem('chats')) || []
let views = +localStorage.getItem('views') || 0
let love = +localStorage.getItem('love') || 0
let selectedAvatar = user.avatar;

// é˜²æˆªå›¾/é˜²ä¸‹è½½/ç¦æ­¢è°ƒè¯•
document.oncontextmenu = e => e.preventDefault();
document.onkeydown = e => {
    if(e.key === 'F12' || (e.ctrlKey && e.shiftKey && (e.key==='I'||e.key==='J'||e.key==='C')))
        e.preventDefault();
}

// ä¸»äººéªŒè¯
function verifyAge(){
    let v = document.getElementById('birthYear').value;
    if(v === MY_SECRET_KEY){
        is_visitor = false;
        localStorage.setItem('IS_MYSELF','OK');
    }
    ageModal.classList.add('hide');
    app.classList.remove('hide');
    views++;
    localStorage.setItem('views', views);
    refreshAll();
    genQrcode();
    lockForVisitors();
}

// è®¿å®¢æƒé™ï¼šåªç¦ç¼–è¾‘/å‘å¸ƒ/åˆ é™¤ï¼Œå…è®¸ç•™è¨€ç§ä¿¡
function lockForVisitors(){
    if(localStorage.getItem('IS_MYSELF') === 'OK'){
        is_visitor = false;
        return;
    }
    is_visitor = true;
    document.getElementById('editBtn').classList.add('hide');
    document.getElementById('publishBtn').classList.add('hide');
    document.getElementById('privateBtn').classList.add('hide');
    // ç•™è¨€ã€ç§ä¿¡æŒ‰é’® ä¿ç•™æ˜¾ç¤º
    document.querySelectorAll('.btn-danger').forEach(b => b.classList.add('hide'));
}

function setTheme(cls) {
    document.body.className = cls;
    document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('active'));
    if(event) event.target.classList.add('active');
}
function addGood() {
    love++;
    localStorage.setItem('love', love);
    document.getElementById('loveNum').innerText = love;
}
function closeViewer() { document.getElementById('imgViewer').style.display = 'none'; }
function go(id) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    event.currentTarget.classList.add('active');
}
function openModal(m) { document.getElementById(m).classList.remove('hide'); }
function closeModal(m) { document.getElementById(m).classList.add('hide'); }

function renderAvatarOptions() {
    let list = document.getElementById('avatarList');
    list.innerHTML = '';
    avatars.forEach(url => {
        let img = document.createElement('img');
        img.src = url;
        img.className = 'avatar-option';
        if (url === selectedAvatar) img.classList.add('selected');
        img.onclick = () => {
            document.querySelectorAll('.avatar-option').forEach(i => i.classList.remove('selected'));
            img.classList.add('selected');
            selectedAvatar = url;
        }
        list.appendChild(img);
    })
}

function publishPost(){
    if(is_visitor) return;
    let txt = postText.value;
    let file = postMedia.files[0];
    if (!txt && !file) return alert('è¯·è¾“å…¥å†…å®¹');
    let url = file ? URL.createObjectURL(file) : '';
    let type = file?.type.startsWith('image') ? 'img' : 'vid';
    posts.unshift({ id: Date.now(), txt, url, type });
    localStorage.setItem('posts', JSON.stringify(posts));
    refreshPosts();
    closeModal('postModal');
    postText.value = '';
    postMedia.value = '';
}
function refreshPosts() {
    postList.innerHTML = '';
    posts.forEach(p => {
        let d = document.createElement('div');
        d.className = 'card';
        d.innerHTML = `
            <div>${p.txt}</div>
            ${p.type === 'img' ? `<img src="${p.url}" style="width:100%;border-radius:12px;margin-top:8px">` : ''}
            ${p.type === 'vid' ? `<video src="${p.url}" controls style="width:100%;margin-top:8px"></video>` : ''}
            ${!is_visitor ? `<div style="text-align:right;margin-top:8px">
                <button onclick="delPost(${p.id})" class="btn btn-danger" style="width:auto;padding:6px 12px">åˆ é™¤</button>
            </div>` : ''}`;
        postList.appendChild(d);
    })
}
function delPost(id){ posts = posts.filter(x=>x.id!==id); localStorage.setItem('posts',JSON.stringify(posts)); refreshPosts(); }

function saveProfile(){
    if(is_visitor) return;
    user.name = editName.value || user.name;
    user.height = editHeight.value;
    user.weight = editWeight.value;
    user.size = editSize.value;
    user.avatar = selectedAvatar;
    let simg = editSizeImg.files[0];
    if(simg) user.sizeImg = URL.createObjectURL(simg);
    user.style = Array.from(editStyle.selectedOptions).map(o=>o.value);
    localStorage.setItem('user', JSON.stringify(user));
    refreshProfile();
    closeModal('editProfileModal');
}
function refreshProfile(){
    nameShow.innerText = user.name;
    avatarShow.src = user.avatar;
    heightShow.innerText = user.height || '--';
    weightShow.innerText = user.weight || '--';
    sizeShow.innerText = user.size || '--';
    if(user.sizeImg){ sizeImgShow.src=user.sizeImg; sizeImgShow.classList.remove('hide'); }
    else sizeImgShow.classList.add('hide');
    let tagContainer = document.getElementById('styleTagsBelowAvatar');
    tagContainer.innerHTML = '';
    user.style.forEach(t=>{
        let span=document.createElement('span'); span.className='style-tag'; span.innerText=t;
        tagContainer.appendChild(span);
    })
}

function addPrivate(){
    if(is_visitor) return;
    let f=privateFile.files[0];
    if(!f)return alert('è¯·é€‰æ‹©æ–‡ä»¶');
    let t=privateHour.value;
    let now=Date.now();
    privateList.unshift({id:now, url:URL.createObjectURL(f), type:f.type.startsWith('image')?'img':'vid', exp:now + +t});
    localStorage.setItem('private',JSON.stringify(privateList));
    refreshPrivate();
    closeModal('privateModal');
    privateFile.value='';
}
function refreshPrivate(){
    privateList=privateList.filter(p=>p.exp>Date.now());
    privateList.innerHTML='';
    privateList.forEach(p=>{
        let d=document.createElement('div'); d.className='card';
        let h=Math.floor((p.exp-Date.now())/3600000);
        let m=Math.floor(((p.exp-Date.now())%3600000)/60000);
        d.innerHTML=`
            ${p.type==='img'?`<img src="${p.url}" style="width:100%;border-radius:12px">`:'')}
            ${p.type==='vid'?`<video src="${p.url}" controls style="width:100%"></video>`:'')}
            <div class="countdown">å‰©ä½™ ${h}æ—¶${m}åˆ†</div>
            ${!is_visitor ? `<button class="btn btn-danger" onclick="delPrivate(${p.id})">åˆ é™¤</button>` : ''}`;
        privateList.appendChild(d);
    })
}
function delPrivate(id){ privateList=privateList.filter(p=>p.id!==id); localStorage.setItem('private',JSON.stringify(privateList)); refreshPrivate(); }

// ç•™è¨€ + ç§ä¿¡ï¼ˆæ‰€æœ‰äººå¯ç”¨ï¼‰
function sendMsg(){
    let name=msgName.value||'åŒ¿å';
    let content=msgContent.value;
    if(!content)return alert('è¯·è¾“å…¥å†…å®¹');
    msgs.unshift({id:Date.now(),name,content});
    localStorage.setItem('msgs',JSON.stringify(msgs));
    refreshMsg();
    closeModal('msgModal');
    msgName.value='';
    msgContent.value='';
}
function refreshMsg(){
    msgList.innerHTML='';
    msgs.forEach(m=>{
        let item=document.createElement('div'); item.className='item';
        item.innerHTML=`<div class="item-name">${m.name}</div><div>${m.content}</div>${!is_visitor?`<div style="text-align:right"><button onclick="delMsg(${m.id})" class="btn btn-danger" style="width:auto;padding:4px 8px;margin-top:4px">åˆ </button></div>`:''}`;
        msgList.appendChild(item);
    })
}
function delMsg(id){ msgs=msgs.filter(m=>m.id!==id); localStorage.setItem('msgs',JSON.stringify(msgs)); refreshMsg(); }

function sendChat(){
    let name=chatName.value||'åŒ¿å';
    let content=chatContent.value;
    if(!content)return alert('è¯·è¾“å…¥å†…å®¹');
    chats.unshift({id:Date.now(),name,content});
    localStorage.setItem('chats',JSON.stringify(chats));
    refreshChat();
    closeModal('chatModal');
    chatName.value='';
    chatContent.value='';
}
function refreshChat(){
    chatList.innerHTML='';
    chats.forEach(c=>{
        let item=document.createElement('div'); item.className='item';
        item.innerHTML=`<div class="item-name">${c.name}</div><div>${c.content}</div>${!is_visitor?`<div style="text-align:right"><button onclick="delChat(${c.id})" class="btn btn-danger" style="width:auto;padding:4px 8px;margin-top:4px">åˆ </button></div>`:''}`;
        chatList.appendChild(item);
    })
}
function delChat(id){ chats=chats.filter(c=>c.id!==id); localStorage.setItem('chats',JSON.stringify(chats)); refreshChat(); }

function refreshView(){
    document.getElementById('viewCount').innerText=`ğŸ‘€ æµè§ˆé‡ï¼š${views}ï¼ˆä»…è‡ªå·±å¯è§ï¼‰`;
}

function genQrcode(){
    try{
        QRCode.toCanvas(document.getElementById('qrcode'), window.location.href,{
            width:120, margin:1, color:{dark:'#ff70a6', light:'#fff'}
        });
    }catch(e){}
}

function refreshAll(){
    refreshProfile();
    refreshPosts();
    refreshPrivate();
    refreshMsg();
    refreshChat();
    refreshView();
}
</script>
</body>
</html>
